<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>slackget10::Package - This class is the internal representation of a package for slack-get 1.0</title>
<link rel="stylesheet" href="http://search.cpan.org/s/style.css" type="text/css" />
<link rev="made" href="mailto:root@midas.slackware.lan" />
</head>

<body>

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#version">VERSION</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#constructor">CONSTRUCTOR</a></li>
	<ul>

		<li><a href="#new">new</a></li>
	</ul>

	<li><a href="#functions">FUNCTIONS</a></li>
	<ul>

		<li><a href="#merge">merge</a></li>
		<li><a href="#compare_version">compare_version</a></li>
		<li><a href="#fill_object_from_package_name">fill_object_from_package_name</a></li>
		<li><a href="#extract_informations">extract_informations</a></li>
		<li><a href="#clean_description">clean_description</a></li>
		<li><a href="#grab_info_from_description">grab_info_from_description</a></li>
		<li><a href="#to_xml">to_XML</a></li>
		<li><a href="#to_string">to_string</a></li>
		<li><a href="#to_html">to_HTML</a></li>
	</ul>

	<li><a href="#printing_methods">PRINTING METHODS</a></li>
	<ul>

		<li><a href="#print_restricted_info">print_restricted_info</a></li>
		<li><a href="#print_full_info">print_full_info</a></li>
		<li><a href="#fprint_restricted_info">fprint_restricted_info</a></li>
		<li><a href="#fprint_full_info">fprint_full_info</a></li>
	</ul>

	<li><a href="#accessors">ACCESSORS</a></li>
	<ul>

		<li><a href="#setvalue">setValue</a></li>
		<li><a href="#getvalue">getValue</a></li>
		<li><a href="#status">status</a></li>
		<li><a href="#_setid__private_">_setId [PRIVATE]</a></li>
		<li><a href="#get_id">get_id</a></li>
		<li><a href="#description">description</a></li>
		<li><a href="#filelist">filelist</a></li>
		<li><a href="#name">name</a></li>
		<li><a href="#compressed_size">compressed_size</a></li>
		<li><a href="#uncompressed_size">uncompressed_size</a></li>
		<li><a href="#location">location</a></li>
		<li><a href="#conflicts">conflicts</a></li>
		<li><a href="#suggests">suggests</a></li>
		<li><a href="#required">required</a></li>
		<li><a href="#architecture">architecture</a></li>
		<li><a href="#version">version</a></li>
		<li><a href="#get_fields_list">get_fields_list</a></li>
	</ul>

	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#bugs">BUGS</a></li>
	<li><a href="#acknowledgements">ACKNOWLEDGEMENTS</a></li>
	<li><a href="#copyright___license">COPYRIGHT &amp; LICENSE</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>slackget10::Package - This class is the internal representation of a package for slack-get 1.0</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="version">VERSION</a></h1>
<p>Version 1.0.0</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>This module is used to represent a package for slack-get</p>
<pre>
    use slackget10::Package;</pre>
<pre>
    my $package = slackget10::Package-&gt;new('package-1.0.0-noarch-1');
    $package-&gt;setValue('description',&quot;This is a test of the slackget10::Package object&quot;);
    $package-&gt;fill_object_from_package_name();</pre>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="constructor">CONSTRUCTOR</a></h1>
<p>
</p>
<h2><a name="new">new</a></h2>
<p>The constructor take two parameters : a package name, and an id (the namespace of the package like 'slackware' or 'linuxpackages')</p>
<pre>
        my $package = new slackget10::Package ('aaa_base-10.0.0-noarch-1','slackware');</pre>
<p>The constructor automatically call the <code>fill_object_from_package_name()</code> method.</p>
<p>You also can pass some extra arguments like that :</p>
<pre>
        my $package = new slackget10::Package ('aaa_base-10.0.0-noarch-1', 'package-object-version' =&gt; '1.0.0');</pre>
<p>The constructor return undef if the id is not defined.</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="functions">FUNCTIONS</a></h1>
<p>
</p>
<h2><a name="merge">merge</a></h2>
<p>This method merge $another_package with $package. WARNING: $another_package will be destroy in the operation (this is a collateral damage ;-), for some dark preocupation of memory.</p>
<p>This method overwrite existing value.</p>
<pre>
        $package-&gt;merge($another_package);</pre>
<p>
</p>
<h2><a name="compare_version">compare_version</a></h2>
<p>This method take another slackget10::Package as argument and compare it's version to the current object.</p>
<pre>
        if( $package-&gt;compare_version( $another_package ) == -1 )
        {
                print $another_package-&gt;get_id,&quot; is newer than &quot;,$package-&gt;get_id ,&quot;\n&quot;;
        }</pre>
<p>Returned code :</p>
<pre>
        -1 =&gt; $package version is lesser than $another_package's one
        0 =&gt; $package version is equal to $another_package's one
        1 =&gt; $package version is greater than $another_package's one
        undef =&gt; an error occured.</pre>
<p>
</p>
<h2><a name="fill_object_from_package_name">fill_object_from_package_name</a></h2>
<p>Try to extract the maximum informations from the name of the package. The constructor automatically call this method.</p>
<pre>
        $package-&gt;fill_object_from_package_name();</pre>
<p>
</p>
<h2><a name="extract_informations">extract_informations</a></h2>
<p>Extract informations about a package from a string. This string must be a line of the description of a package.</p>
<pre>
        $package-&gt;extract_informations($data);</pre>
<p>This method is designe to be called by the slackget10::SpecialFiles::PACKAGES class, and automatically call the <code>clean_description()</code> method.</p>
<p>
</p>
<h2><a name="clean_description">clean_description</a></h2>
<p>remove the ``&lt;package_name&gt;: '' string in front of each line of the description. Remove extra tabulation (for identation).</p>
<pre>
        $package-&gt;clean_description();</pre>
<p>
</p>
<h2><a name="grab_info_from_description">grab_info_from_description</a></h2>
<p>Try to find some informations in the description. For example, packages from linuxpackages.net contain a line starting by Packager: ..., this method will extract this information and re-set the package-maintener tag.</p>
<p>The supported tags are: package-maintener, info-destination-slackware, info-packager-mail, info-homepage, info-packager-tool, info-packager-tool-version</p>
<pre>
        $package-&gt;grab_info_from_description();</pre>
<p>
</p>
<h2><a name="to_xml">to_XML</a></h2>
<p>return the package as an XML encoded string.</p>
<pre>
        $xml = $package-&gt;to_XML();</pre>
<p>
</p>
<h2><a name="to_string">to_string</a></h2>
<p>Alias for <code>to_XML()</code></p>
<p>
</p>
<h2><a name="to_html">to_HTML</a></h2>
<p>return the package as an HTML string</p>
<pre>
        my $html = $package-&gt;to_HTML ;</pre>
<p>Note: I have design this method for 2 reasons. First for an easy integration of the search result in a GUI, second for my website search engine. So this HTML may not satisfy you. In this case just generate new HTML from accessors ;-)</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="printing_methods">PRINTING METHODS</a></h1>
<p>
</p>
<h2><a name="print_restricted_info">print_restricted_info</a></h2>
<p>Print a part of package information.</p>
<pre>
        $package-&gt;print_restricted_info();</pre>
<p>
</p>
<h2><a name="print_full_info">print_full_info</a></h2>
<p>Print all informations found in the package.</p>
<pre>
        $package-&gt;print_full_info();</pre>
<p>
</p>
<h2><a name="fprint_restricted_info">fprint_restricted_info</a></h2>
<p>Same as print_restricted_info, but output in HTML</p>
<pre>
        $package-&gt;fprint_restricted_info();</pre>
<p>
</p>
<h2><a name="fprint_full_info">fprint_full_info</a></h2>
<p>Same as print_full_info, but output in HTML</p>
<pre>
        $package-&gt;fprint_full_info();</pre>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="accessors">ACCESSORS</a></h1>
<p>
</p>
<h2><a name="setvalue">setValue</a></h2>
<p>Set the value of a named key to the value passed in argument.</p>
<pre>
        $package-&gt;setValue($key,$value);</pre>
<p>
</p>
<h2><a name="getvalue">getValue</a></h2>
<p>Return the value of a key :</p>
<pre>
        $string = $package-&gt;getValue($key);</pre>
<p>
</p>
<h2><a name="status">status</a></h2>
<p>Return the current status of the package object as a slackget10::Status object. This object is set by other class, and in most case you don't have to set it by yourself.</p>
<pre>
        print &quot;The current status for &quot;,$package-&gt;name,&quot; is &quot;,$package-&gt;status()-&gt;to_string,&quot;\n&quot;;</pre>
<p>You also can set the status, by passing a slackget10::Status object, to this method.</p>
<pre>
        $package-&gt;status($status_object);</pre>
<p>This method return 1 if all goes well and undef else.
=cut</p>
<p><table cellspacing="0" cellpadding="0"><tr><td>sub status {
<tr><td><td>my ($self,$status) = @_ ;
<tr><td><td><code>if(defined($status))</code>
<tr><td><td>{
<tr><td><td>return undef <code>if(ref($status)</code> ne 'slackget10::Status');
<tr><td><td>$self-&gt;{STATUS} = $status ;
<tr><td><td>}
<tr><td><td>else
<tr><td><td>{
<tr><td><td>return $self-&gt;{STATUS} ;
<tr><td><td>}
</table></p>
<pre>

        return 1;
}</pre>
<p>
</p>
<h2><a name="_setid__private_">_setId [PRIVATE]</a></h2>
<p>set the package ID (normally the package complete name, like aaa_base-10.0.0-noarch-1). In normal use you don't need to use this method</p>
<pre>
        $package-&gt;_setId('aaa_base-10.0.0-noarch-1');</pre>
<p>
</p>
<h2><a name="get_id">get_id</a></h2>
<p>return the package id (full name, like aaa_base-10.0.0-noarch-1).</p>
<pre>
        $string = $package-&gt;get_id();</pre>
<p>
</p>
<h2><a name="description">description</a></h2>
<p>return the description of the package.</p>
<pre>
        $string = $package-&gt;description();</pre>
<p>
</p>
<h2><a name="filelist">filelist</a></h2>
<p>return the list of files in the package. WARNING: by default this list is not included !</p>
<pre>
        $string = $package-&gt;filelist();</pre>
<p>
</p>
<h2><a name="name">name</a></h2>
<p>return the name of the package. 
Ex: for the package aaa_base-10.0.0-noarch-1 <code>name()</code> will return aaa_base</p>
<pre>
        my $string = $package-&gt;name();</pre>
<p>
</p>
<h2><a name="compressed_size">compressed_size</a></h2>
<p>return the compressed size of the package</p>
<pre>
        $number = $package-&gt;compressed_size();</pre>
<p>
</p>
<h2><a name="uncompressed_size">uncompressed_size</a></h2>
<p>return the uncompressed size of the package</p>
<pre>
        $number = $package-&gt;uncompressed_size();</pre>
<p>
</p>
<h2><a name="location">location</a></h2>
<p>return the location of the installed package.</p>
<pre>
        $string = $package-&gt;location();</pre>
<p>
</p>
<h2><a name="conflicts">conflicts</a></h2>
<p>return the list of conflicting pakage.</p>
<pre>
        $string = $apckage-&gt;conflict();</pre>
<p>
</p>
<h2><a name="suggests">suggests</a></h2>
<p>return the suggested package related to the current package.</p>
<pre>
        $string = $package-&gt;suggest();</pre>
<p>
</p>
<h2><a name="required">required</a></h2>
<p>return the required packages for installing the current package</p>
<pre>
        $string = $package-&gt;required();</pre>
<p>
</p>
<h2><a name="architecture">architecture</a></h2>
<p>return the architecture the package is compiled for.</p>
<pre>
        $string = $package-&gt;architecture();</pre>
<p>
</p>
<h2><a name="version">version</a></h2>
<p>return the package version.</p>
<pre>
        $string = $package-&gt;version();</pre>
<p>
</p>
<h2><a name="get_fields_list">get_fields_list</a></h2>
<p>return a list of all fields of the package. This method is suitable for example in GUI for displaying informations on packages.</p>
<pre>
        foreach my $field ( $package-&gt;get_fields_list )
        {
                qt_textbrowser-&gt;append( &quot;&lt;b&gt;$field&lt;/b&gt; : &quot;.$package-&gt;getValue( $field ).&quot;&lt;br/&gt;\n&quot; ) ;
        }</pre>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>DUPUIS Arnaud, <code>&lt;a.dupuis@infinityperl.org&gt;</code>

</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="bugs">BUGS</a></h1>
<p>Please report any bugs or feature requests to
<code>bug-slackget10-Package@rt.cpan.org</code>, or through the web interface at
<a href="http://rt.cpan.org/NoAuth/ReportBug.html?Queue=slackget10">http://rt.cpan.org/NoAuth/ReportBug.html</a>.
I will be notified, and then you'll automatically be notified of progress on
your bug as I make changes.

</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="acknowledgements">ACKNOWLEDGEMENTS</a></h1>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="copyright___license">COPYRIGHT &amp; LICENSE</a></h1>
<p>Copyright 2005 DUPUIS Arnaud, All Rights Reserved.

</p>
<p>This program is free software; you can redistribute it and/or modify it
under the same terms as Perl itself.

</p>
<p><a href="#__index__"><small>Top</small></a></p>

</body>

</html>
