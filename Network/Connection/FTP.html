<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>slackget10::Network::Connection::FTP - This class encapsulate Net::FTP</title>
<link rel="stylesheet" href="http://search.cpan.org/s/style.css" type="text/css" />
<link rev="made" href="mailto:root@midas.slackware.lan" />
</head>

<body>

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#version">VERSION</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#constructor">CONSTRUCTOR</a></li>
	<ul>

		<li><a href="#new">new</a></li>
	</ul>

	<li><a href="#functions">FUNCTIONS</a></li>
	<ul>

		<li><a href="#test_server">test_server</a></li>
		<li><a href="#_test_current_directory__private_">_test_current_directory [PRIVATE]</a></li>
		<li><a href="#get_file">get_file</a></li>
		<li><a href="#fetch_file">fetch_file</a></li>
		<li><a href="#fetch_all">fetch_all</a></li>
		<li><a href="#conn">conn</a></li>
	</ul>

	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#bugs">BUGS</a></li>
	<li><a href="#acknowledgements">ACKNOWLEDGEMENTS</a></li>
	<li><a href="#copyright___license">COPYRIGHT &amp; LICENSE</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>slackget10::Network::Connection::FTP - This class encapsulate Net::FTP</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="version">VERSION</a></h1>
<p>Version 1.0.0</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>This class encapsulate Net::FTP, and provide some methods for the treatment of FTP requests.</p>
<p>This class need the following extra CPAN modules :</p>
<pre>
        - Net::FTP
        - Time::HiRes</pre>
<pre>
    use slackget10::Network::Connection::FTP;</pre>
<pre>
    my $foo = slackget10::Network::Connection::FTP-&gt;new();
    ...</pre>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="constructor">CONSTRUCTOR</a></h1>
<p>
</p>
<h2><a name="new">new</a></h2>
<p>This class is not designed to be instanciate alone or used alone. You have to use the slackget10::Network::Connection.</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="functions">FUNCTIONS</a></h1>
<p>
</p>
<h2><a name="test_server">test_server</a></h2>
<p>This method test the rapidity of the mirror, by making a new connection to the server and logging in. Be aware of the fact that after testing the connection you will have a new connection (if you were previously connected the previous connection is closed).</p>
<pre>
        my $time = $connection-&gt;test_server() ;</pre>
<p>
</p>
<h2><a name="_test_current_directory__private_">_test_current_directory [PRIVATE]</a></h2>
<p>This private methos is used internally each time you require a transfert, for testing if the current directory is the 'path' parameter of the DATA section of the current Connection object.</p>
<p>Do that by sending a PWD command to the server and compare the result with $connection-&gt;path.</p>
<pre>
        $ftp-&gt;cwd('/any/remote/directory/') unless($connection-&gt;_test_current_directory) ;</pre>
<p>Due to the fact that this method is private and internal the example is not really explicit, please look at the code for more informations.</p>
<p>
</p>
<h2><a name="get_file">get_file</a></h2>
<p>Download and return a given file.</p>
<pre>
        my $file = $connection-&gt;get_file('PACKAGES.TXT') ;</pre>
<p>Please note that the Net::FTP module doesn't support a method like that. So, this method is not an encapsulator like the one of HTTP.pm, and use slackget10::File to return the content of the downloaded file.</p>
<p>So you'd better to use fetch_file().</p>
<p>
</p>
<h2><a name="fetch_file">fetch_file</a></h2>
<p>Download and store a given file.</p>
<pre>
        $connection-&gt;fetch_file() ; # download the file $connection-&gt;file and store it at $config-&gt;{common}-&gt;{'update-directory'}/$connection-&gt;file, this way is not recommended
        or
        $connection-&gt;fetch_file($remote_file) ; # download the file $remote_file and store it at $config-&gt;{common}-&gt;{'update-directory'}/$connection-&gt;file, this way is not recommended
        or
        $connection-&gt;fetch_file('PACKAGES.TXT',&quot;$config-&gt;{common}-&gt;{'update-directory'}/&quot;.$current_specialfilecontainer_object-&gt;id.&quot;/PACKAGES.TXT&quot;) ; # This is the recommended way.
        # This is equivalent to : $connection-&gt;fetch_file($remote_file,$local_file) ;</pre>
<p>This method return a slackget10::Status object with the following object declaration :</p>
<pre>
        my $status =  slackget10::Status-&gt;new(codes =&gt; {
                0 =&gt; &quot;All goes well.\n&quot;,
                1 =&gt; &quot;An error occured &quot;
        });</pre>
<p>
</p>
<h2><a name="fetch_all">fetch_all</a></h2>
<p>This method fetch all files declare in the ``files'' parameter of the constructor.</p>
<pre>
        $connection-&gt;fetch_all or die &quot;Unable to fetch all files\n&quot;;</pre>
<p>This method save all files in the $config-&gt;{common}-&gt;{'update-directory'} directory (so you have to manage yourself the files deletion/replacement problems)
=cut</p>
<p>sub fetch_all {
	my $self = shift ;
	foreach (@{$self-&gt;files}){
		$self-&gt;<code>fetch($_)</code> or return undef;
	}
	return 1 ;
}</p>
<p>
</p>
<h2><a name="conn">conn</a></h2>
<p>An accessor which return the current Net::FTP connection object</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>DUPUIS Arnaud, <code>&lt;a.dupuis@infinityperl.org&gt;</code></p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="bugs">BUGS</a></h1>
<p>Please report any bugs or feature requests to
<code>bug-slackget10-networking@rt.cpan.org</code>, or through the web interface at
<a href="http://rt.cpan.org/NoAuth/ReportBug.html?Queue=slackget10">http://rt.cpan.org/NoAuth/ReportBug.html</a>.
I will be notified, and then you'll automatically be notified of progress on
your bug as I make changes.</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="acknowledgements">ACKNOWLEDGEMENTS</a></h1>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="copyright___license">COPYRIGHT &amp; LICENSE</a></h1>
<p>Copyright 2005 DUPUIS Arnaud, All Rights Reserved.</p>
<p>This program is free software; you can redistribute it and/or modify it
under the same terms as Perl itself.</p>
<p><a href="#__index__"><small>Top</small></a></p>

</body>

</html>
