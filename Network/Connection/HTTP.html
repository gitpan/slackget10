<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>slackget10::Network::Connection::HTTP - This class encapsulate LWP::Simple</title>
<link rel="stylesheet" href="http://search.cpan.org/s/style.css" type="text/css" />
<link rev="made" href="mailto:root@midas.slackware.lan" />
</head>

<body>

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#version">VERSION</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#constructor">CONSTRUCTOR</a></li>
	<ul>

		<li><a href="#new">new</a></li>
	</ul>

	<li><a href="#functions">FUNCTIONS</a></li>
	<ul>

		<li><a href="#test_server">test_server</a></li>
		<li><a href="#get_file">get_file</a></li>
		<li><a href="#fetch_file">fetch_file</a></li>
		<li><a href="#fetch_all">fetch_all</a></li>
	</ul>

	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#bugs">BUGS</a></li>
	<li><a href="#acknowledgements">ACKNOWLEDGEMENTS</a></li>
	<li><a href="#copyright___license">COPYRIGHT &amp; LICENSE</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>slackget10::Network::Connection::HTTP - This class encapsulate LWP::Simple</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="version">VERSION</a></h1>
<p>Version 1.0.0</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>This class encapsulate LWP::Simple, and provide some methods for the treatment of HTTP requests.</p>
<p>You can't use this class without the slackget10::Network::Connection one.</p>
<p>This class need the following extra CPAN modules :</p>
<pre>
        - LWP::Simple
        - Time::HiRes</pre>
<pre>
    use slackget10::Network::Connection::HTTP;</pre>
<pre>
    my $foo = slackget10::Network::Connection::HTTP-&gt;new();
    ...</pre>
<p>This module require the following modules from CPAN : LWP::Simple, Time::HiRes.</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="constructor">CONSTRUCTOR</a></h1>
<p>
</p>
<h2><a name="new">new</a></h2>
<p>This class is not designed to be instanciate alone or used alone. You have to use the slackget10::Network::Connection.</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="functions">FUNCTIONS</a></h1>
<p>
</p>
<h2><a name="test_server">test_server</a></h2>
<p>This method test the rapidity of the mirror, by timing a head request on the FILELIST.TXT file.</p>
<pre>
        my $time = $self-&gt;test_server() ;</pre>
<p>
</p>
<h2><a name="get_file">get_file</a></h2>
<p>Download and return a given file.</p>
<pre>
        my $file = $connection-&gt;get_file('PACKAGES.TXT') ;</pre>
<p>
</p>
<h2><a name="fetch_file">fetch_file</a></h2>
<p>Download and store a given file.</p>
<pre>
        $connection-&gt;fetch_file() ; # download the file $connection-&gt;file and store it at $config-&gt;{common}-&gt;{'update-directory'}/$connection-&gt;file, this way is not recommended
        or
        $connection-&gt;fetch_file($remote_file) ; # download the file $remote_file and store it at $config-&gt;{common}-&gt;{'update-directory'}/$connection-&gt;file, this way is not recommended
        or
        $connection-&gt;fetch_file('PACKAGES.TXT',&quot;$config-&gt;{common}-&gt;{'update-directory'}/&quot;.$current_specialfilecontainer_object-&gt;id.&quot;/PACKAGES.TXT&quot;) ; # This is the recommended way.
        # This is equivalent to : $connection-&gt;fetch_file($remote_file,$local_file) ;</pre>
<p>This method return a slackget10::Status object with the following object declaration :</p>
<pre>
        my $status =  slackget10::Status-&gt;new(codes =&gt; {
                0 =&gt; &quot;All goes well. Server said:\n\t$ret_code - &quot;.status_message( $ret_code ).&quot;\n&quot;,
                1 =&gt; &quot;Server error, you must choose the next host for this server. Server said:\n\t$ret_code - &quot;.status_message( $ret_code ).&quot;\n&quot;,
                2 =&gt; &quot;Client error, it seems that you have a problem with you connection or with the slackget10 library (or with a library which we depended on). Server said:\n\t$ret_code - &quot;.status_message( $ret_code ).&quot;\n&quot;,
                3 =&gt; &quot;Server has redirected us, we prefer direct connection, change host for this server. Server said:\n\t$ret_code - &quot;.status_message( $ret_code ).&quot;\n&quot;,
                4 =&gt; &quot;The HTTP connection is not a success and we are not able to know what, we recommend to change the current host of this server. Server said:\n\t$ret_code - &quot;.status_message( $ret_code ).&quot;\n&quot;
        });</pre>
<p>This is the direct code of this method :)</p>
<p>
</p>
<h2><a name="fetch_all">fetch_all</a></h2>
<p>This method fetch all files declare in the ``files'' parameter of the constructor.</p>
<pre>
        $connection-&gt;fetch_all or die &quot;Unable to fetch all files\n&quot;;</pre>
<p>This method save all files in the $config-&gt;{common}-&gt;{'update-directory'} directory (so you have to manage yourself the files deletion/replacement problems)
=cut</p>
<p>sub fetch_all {
	my $self = shift ;
	foreach (@{$self-&gt;files}){
		$self-&gt;<code>fetch($_)</code> or return undef;
	}
	return 1 ;
}</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>DUPUIS Arnaud, <code>&lt;a.dupuis@infinityperl.org&gt;</code></p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="bugs">BUGS</a></h1>
<p>Please report any bugs or feature requests to
<code>bug-slackget10-networking@rt.cpan.org</code>, or through the web interface at
<a href="http://rt.cpan.org/NoAuth/ReportBug.html?Queue=slackget10">http://rt.cpan.org/NoAuth/ReportBug.html</a>.
I will be notified, and then you'll automatically be notified of progress on
your bug as I make changes.</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="acknowledgements">ACKNOWLEDGEMENTS</a></h1>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="copyright___license">COPYRIGHT &amp; LICENSE</a></h1>
<p>Copyright 2005 DUPUIS Arnaud, All Rights Reserved.</p>
<p>This program is free software; you can redistribute it and/or modify it
under the same terms as Perl itself.</p>
<p><a href="#__index__"><small>Top</small></a></p>

</body>

</html>
